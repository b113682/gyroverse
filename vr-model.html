<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>3D„É¢„Éá„É´ VR‰ΩìÈ®ì</title>
    <meta name="description" content="„Çπ„ÉÜ„É¨„Ç™„Çπ„Ç≥„Éî„ÉÉ„ÇØVR‰ΩìÈ®ì">
    <!-- A-Frame„É©„Ç§„Éñ„É©„É™„ÅÆË™≠„ÅøËæº„Åø -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
        // „Çø„ÉÉ„ÉÅ„ÅßÂâçÈÄ≤„Åô„Çã„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        AFRAME.registerComponent('touch-to-move', {
            schema: {
                speed: {default: 0.1}
            },
            init: function() {
                this.moving = false;
                this.touchCount = 0;
                
                this.touchStartHandler = this.onTouchStart.bind(this);
                this.touchEndHandler = this.onTouchEnd.bind(this);
                
                window.addEventListener('touchstart', this.touchStartHandler);
                window.addEventListener('touchend', this.touchEndHandler);
            },
            onTouchStart: function(evt) {
                this.touchCount = evt.touches.length;
                if (evt.touches.length === 1) {
                    this.moving = true;
                }
            },
            onTouchEnd: function(evt) {
                this.touchCount = evt.touches.length;
                if (evt.touches.length === 0) {
                    this.moving = false;
                }
            },
            tick: function() {
                if (this.moving && this.touchCount === 1) {
                    var rig = this.el;
                    var camera = rig.querySelector('a-camera');
                    if (!camera) return;
                    
                    var direction = new THREE.Vector3();
                    camera.object3D.getWorldDirection(direction);
                    
                    var position = rig.getAttribute('position');
                    position.x += direction.x * this.data.speed;
                    position.z += direction.z * this.data.speed;
                    rig.setAttribute('position', position);
                }
            },
            remove: function() {
                window.removeEventListener('touchstart', this.touchStartHandler);
                window.removeEventListener('touchend', this.touchEndHandler);
            }
        });

        // „Éî„É≥„ÉÅ„Åß„Ç∫„Éº„É†„Åô„Çã„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà
        AFRAME.registerComponent('pinch-zoom', {
            init: function() {
                this.initialDistance = 0;
                this.currentFov = 80;
                
                this.touchStartHandler = this.onTouchStart.bind(this);
                this.touchMoveHandler = this.onTouchMove.bind(this);
                
                window.addEventListener('touchstart', this.touchStartHandler);
                window.addEventListener('touchmove', this.touchMoveHandler);
            },
            onTouchStart: function(evt) {
                if (evt.touches.length === 2) {
                    evt.preventDefault();
                    var dx = evt.touches[0].pageX - evt.touches[1].pageX;
                    var dy = evt.touches[0].pageY - evt.touches[1].pageY;
                    this.initialDistance = Math.sqrt(dx * dx + dy * dy);
                }
            },
            onTouchMove: function(evt) {
                if (evt.touches.length === 2) {
                    evt.preventDefault();
                    
                    var dx = evt.touches[0].pageX - evt.touches[1].pageX;
                    var dy = evt.touches[0].pageY - evt.touches[1].pageY;
                    var distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (this.initialDistance > 0) {
                        var ratio = distance / this.initialDistance;
                        var newFov = this.currentFov / ratio;
                        newFov = Math.max(30, Math.min(100, newFov));
                        
                        var camera = this.el.querySelector('a-camera');
                        if (camera) {
                            camera.setAttribute('camera', 'fov', newFov);
                        }
                    }
                    
                    this.initialDistance = distance;
                    var camera = this.el.querySelector('a-camera');
                    if (camera) {
                        this.currentFov = camera.getAttribute('camera').fov;
                    }
                }
            },
            remove: function() {
                window.removeEventListener('touchstart', this.touchStartHandler);
                window.removeEventListener('touchmove', this.touchMoveHandler);
            }
        });
    </script>
    <style>
        body { margin: 0; overflow: hidden; }
        #instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            border-radius: 5px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Êìç‰ΩúË™¨Êòé -->
    <div id="instructions">
        üì± Êìç‰ΩúÊñπÊ≥ï:<br>
        ‚Ä¢ 1Êú¨Êåá„Çø„ÉÉ„ÉÅ(Èï∑Êäº„Åó): ÂâçÈÄ≤<br>
        ‚Ä¢ „Çπ„ÉØ„Ç§„Éó: Ë¶ñÁÇπÁßªÂãï<br>
        ‚Ä¢ 2Êú¨Êåá„Éî„É≥„ÉÅ: „Ç∫„Éº„É†
    </div>

    <!-- VR„Ç∑„Éº„É≥„ÅÆÂÆöÁæ© -->
    <a-scene vr-mode-ui="enabled: true">
        <!-- „Ç´„É°„É©„É™„Ç∞ÔºàÁßªÂãïÂèØËÉΩ„Å™„Ç´„É°„É©„Ç≥„É≥„ÉÜ„ÉäÔºâ -->
        <a-entity id="rig" 
                  touch-to-move="speed: 0.1"
                  pinch-zoom
                  position="0 1.6 3">
            
            <!-- „Ç´„É°„É©ÔºàË¶ñÁÇπÔºâ -->
            <a-camera look-controls="pointerLockEnabled: false"
                      fov="80">
                <!-- „Ç´„Éº„ÇΩ„É´ÔºàË¶ñÁ∑öÊìç‰ΩúÁî®Ôºâ -->
                <a-cursor></a-cursor>
            </a-camera>
        </a-entity>

        <!-- 3D„É¢„Éá„É´„ÅÆÈÖçÁΩÆ -->
        <a-entity 
            id="row2"
            gltf-model="url(LS-t_hy.glb)" 
            position="1 1.6 -2"
            scale="2 2 2"
            rotation="45 0 0">
        </a-entity>
        <a-entity 
            id="ro3"
            gltf-model="url(LS-t_MAI.glb)" 
            position="0 0.8 -2"
            scale="2 2 2"
            rotation="0 0 0">
        </a-entity>

        
        <!-- Áí∞Â¢ÉÂÖâÔºàÂÖ®‰Ωì„ÇíÁÖß„Çâ„ÅôÂÖâÔºâ -->
        <a-light type="ambient" color="#BBB"></a-light>
        
        <!-- ÊåáÂêëÊÄß„É©„Ç§„ÉàÔºàÁâπÂÆöÊñπÂêë„Åã„Çâ„ÅÆÂÖâÔºâ -->
        <a-light type="directional" color="#FFF" intensity="0.6" position="-0.5 1 1"></a-light>
        
        <!-- Á©∫ÔºàËÉåÊôØÔºâ -->
        <a-sky color="#ECECEC"></a-sky>

        <!-- Âú∞Èù¢ÔºàÂèÇËÄÉÁî®Ôºâ -->
        <a-plane position="0 0 0" 
                 rotation="-90 0 0" 
                 width="10" 
                 height="10" 
                 color="#7BC8A4">
        </a-plane>
        
    </a-scene>
</body>
</html>